# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/



ready = ->



  # Stiki Menu - Necessario adicionar o clone no carregamento da pag para a DOM
  $('.menu').addClass('original').clone().insertAfter('.menu').addClass('cloned').css('position', 'fixed').css('top', '0').css('margin-top', '0').css('z-index', '500').removeClass('original').hide()

  # AREA 2 - FOTO 1
  $('#foto_area2_1').click ->
     # Troca VISIBILIDADE TAMANHO e POSICAO
     $('#foto_area2_1e').css 'visibility', 'visible'
     $('#foto_area2_1e').css 'width', '61%'
     $('#foto_area2_1e').css 'height', '61%'
     $('#foto_area2_1e').css 'float', 'right'
     $('#foto_area2_1e').css 'margin-bottom', '1%'
     $('#foto_area2_1e').css 'margin-right', '16%'

     $('#foto_area2_1').css 'visibility', 'hidden'
     $('#foto_area2_1').css 'width', '40px'
     $('#foto_area2_1').css 'height', '38px'
     $('#foto_area2_1').css 'float', 'left'
     return

  $('#foto_area2_1e').click ->
     $('#foto_area2_1').css 'visibility', 'visible'
     $('#foto_area2_1').css 'width', '200px'
     $('#foto_area2_1').css 'height', '270px'
     $('#foto_area2_1').css 'float', 'right'

     $('#foto_area2_1e').css 'visibility', 'hidden'
     $('#foto_area2_1e').css 'width', '40px'
     $('#foto_area2_1e').css 'height', '38px'
     $('#foto_area2_1e').css 'float', 'left'
     return

  # AREA 2 - FOTO 2
  $('#foto_area2_2').click ->
     $('#foto_area2_2e').css 'visibility', 'visible'
     $('#foto_area2_2e').css 'width', '61%'
     $('#foto_area2_2e').css 'height', '61%'
     $('#foto_area2_2e').css 'float', 'left'
     $('#foto_area2_2e').css 'margin-bottom', '1%'
     $('#foto_area2_2e').css 'margin-left', '16%'

     $('#foto_area2_2').css 'visibility', 'hidden'
     $('#foto_area2_2').css 'width', '40px'
     $('#foto_area2_2').css 'height', '38px'
     $('#foto_area2_2').css 'float', 'right'
     return

  $('#foto_area2_2e').click ->
     $('#foto_area2_2').css 'visibility', 'visible'
     $('#foto_area2_2').css 'width', '200px'
     $('#foto_area2_2').css 'height', '270px'
     $('#foto_area2_2').css 'float', 'left'

     $('#foto_area2_2e').css 'visibility', 'hidden'
     $('#foto_area2_2e').css 'width', '40px'
     $('#foto_area2_2e').css 'height', '38px'
     $('#foto_area2_2e').css 'float', 'right'
     return





  # AREA 1 - MODAL
  $('.dialog-open').click ->
    modal.id = '#dialog-' + @id
    $('#overlay').fadeIn()
    $(modal.id).fadeIn()
    return

  $('.ok-dialog').click ->
    modal.hide()
    return

  $('#overlay').click ->
    if $(modal.id).hasClass('modal')

    else
      modal.hide()
    return

  $('.dialog').click ->
    event.stopPropagation()
    return


  $('.boxgrid.slidedown').hover (->
    $('.cover', this).stop().animate { top: '-260px' },
      queue: false
      duration: 300
    return
  ), ->
    $('.cover', this).stop().animate { top: '0px' },
      queue: false
      duration: 300
    return

  $('.boxgrid.slideright').hover (->
    $('.cover', this).stop().animate { left: '325px' },
      queue: false
      duration: 300
    return
  ), ->
    $('.cover', this).stop().animate { left: '0px' },
      queue: false
      duration: 300
    return

  $('.boxgrid.thecombo').hover (->
    $('.cover', this).stop().animate {
      top: '260px'
      left: '325px'
    },
      queue: false
      duration: 300
    return
  ), ->
    $('.cover', this).stop().animate {
      top: '0px'
      left: '0px'
    },
      queue: false
      duration: 300
    return

  $('.boxgrid.peek').hover (->
    $('.cover', this).stop().animate { top: '90px' },
      queue: false
      duration: 160
    return
  ), ->
    $('.cover', this).stop().animate { top: '0px' },
      queue: false
      duration: 160
    return

  $('.boxgrid.captionfull').hover (->
    $('.cover', this).stop().animate { top: '160px' },
      queue: false
      duration: 160
    return
  ), ->
    $('.cover', this).stop().animate { top: '260px' },
      queue: false
      duration: 160
    return

  $('.boxgrid.caption').hover (->
    $('.cover', this).stop().animate { top: '260px' },
      queue: false
      duration: 160
    return
  ), ->
    $('.cover', this).stop().animate { top: '340px' },
      queue: false
      duration: 160
    return

  modal = {}

  modal.hide = ->
    $('#overlay').fadeOut()
    $('.dialog').fadeOut()
    return

# ---
# generated by js2coffee 2.0.1


# MENU
scrollIntervalID = undefined
stickIt = undefined

stickIt = ->
  coordsOrgElement = undefined
  leftOrgElement = undefined
  orgElement = undefined
  orgElementPos = undefined
  orgElementTop = undefined
  widthOrgElement = undefined
  marcador = undefined
  orgElementPos = $('.original').offset()
  orgElementTop = orgElementPos.top
  orgElementPos = $('.marcador').offset()
  marcador = orgElementPos.top

  if $(window).scrollTop() >= orgElementTop
    orgElement = $('.original')
    coordsOrgElement = orgElement.offset()
    leftOrgElement = coordsOrgElement.left
    widthOrgElement = orgElement.css('width')
    $('.cloned').css('left', leftOrgElement + 'px').css('top', 0).css('width', widthOrgElement).show()
    $('.original').css 'visibility', 'hidden'
    if $(window).scrollTop() > marcador
      #$('.desc_posicao').css 'visibility', 'visible'
    else
      #$('.desc_posicao').css 'visibility', 'hidden'
  else
    $('.cloned').hide()
    $('.original').css 'visibility', 'visible'


  #if $(window).scrollTop() >= 0  
  #  $('.original').click -> alert " orig " +  $(window).scrollTop() + " marcador " +  marcador
  #  $('.cloned').click -> alert " clone " +  $(window).scrollTop() + " marcador " +  marcador
  #  $('.menu').click -> alert " menu "+ $(window).scrollTop() + " marcador " +  marcador
  #return

# Chama a funcao que ja tem os elementos carregados na DOM
scrollIntervalID = setInterval(stickIt, 10)

# ---
# generated by js2coffee 2.0.1

# Maneira de garantir a funcionalidade $(document).ready() do js, exemplo codepen. Depois
# eh so passar de js para coffee com o js2coffee
$(document).ready(ready)
$(document).on('page:change', ready)
